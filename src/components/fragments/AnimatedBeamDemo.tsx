'use client';

import React, { forwardRef, useRef } from 'react';

import { cn } from '@/lib/utils';
import { AnimatedBeam } from '@/components/magicui/animated-beam';

const Circle = forwardRef<
  HTMLDivElement,
  { className?: string; children?: React.ReactNode }
>(({ className, children }, ref) => {
  return (
    <div
      ref={ref}
      className={cn(
        'z-10 flex size-12 items-center justify-center rounded-full border-2 bg-white p-3 shadow-[0_0_20px_-12px_rgba(0,0,0,0.8)]',
        className
      )}
    >
      {children}
    </div>
  );
});

Circle.displayName = 'Circle';

export function AnimatedBeamDemo() {
  const containerRef = useRef<HTMLDivElement>(null);
  const div1Ref = useRef<HTMLDivElement>(null);
  const div2Ref = useRef<HTMLDivElement>(null);
  const div3Ref = useRef<HTMLDivElement>(null);
  const div4Ref = useRef<HTMLDivElement>(null);
  const div5Ref = useRef<HTMLDivElement>(null);
  const div6Ref = useRef<HTMLDivElement>(null);
  const div7Ref = useRef<HTMLDivElement>(null);

  return (
    <div
      className='relative flex h-[300px] w-full items-center justify-center overflow-hidden p-10'
      ref={containerRef}
    >
      <div className='flex size-full max-h-[200px] max-w-lg flex-col items-stretch justify-between gap-10'>
        <div className='flex flex-row items-center justify-between'>
          <Circle ref={div1Ref}>
            <Icons.typescript />
          </Circle>
          <Circle ref={div5Ref}>
            <Icons.nextjs />
          </Circle>
        </div>
        <div className='flex flex-row items-center justify-between'>
          <Circle ref={div2Ref}>
            <Icons.tailwind />
          </Circle>
          <Circle ref={div4Ref} className='size-16'>
            <Icons.me />
          </Circle>
          <Circle ref={div6Ref}>
            <Icons.nodejs />
          </Circle>
        </div>
        <div className='flex flex-row items-center justify-between'>
          <Circle ref={div3Ref}>
            <Icons.figma />
          </Circle>
          <Circle ref={div7Ref}>
            <Icons.react />
          </Circle>
        </div>
      </div>

      <AnimatedBeam
        containerRef={containerRef}
        fromRef={div1Ref}
        toRef={div4Ref}
        curvature={-75}
        endYOffset={-10}
      />
      <AnimatedBeam
        containerRef={containerRef}
        fromRef={div2Ref}
        toRef={div4Ref}
      />
      <AnimatedBeam
        containerRef={containerRef}
        fromRef={div3Ref}
        toRef={div4Ref}
        curvature={75}
        endYOffset={10}
      />
      <AnimatedBeam
        containerRef={containerRef}
        fromRef={div5Ref}
        toRef={div4Ref}
        curvature={-75}
        endYOffset={-10}
        reverse
      />
      <AnimatedBeam
        containerRef={containerRef}
        fromRef={div6Ref}
        toRef={div4Ref}
        reverse
      />
      <AnimatedBeam
        containerRef={containerRef}
        fromRef={div7Ref}
        toRef={div4Ref}
        curvature={75}
        endYOffset={10}
        reverse
      />
    </div>
  );
}

const Icons = {
  me: () => (
    <svg
      xmlns='http://www.w3.org/2000/svg'
      x='0px'
      y='0px'
      width='100'
      height='100'
      viewBox='0 0 32 32'
    >
      <path
        d='M30.292,14.948c-0.324-0.498-0.749-0.917-1.245-1.236c0.053-1.698-0.096-3.371-0.21-4.122 c-0.278-2.634-2.483-6.229-5.966-6.229h-0.014h-0.005C22.8,3.36,22.747,3.359,22.694,3.359c-0.076,0-0.152,0.002-0.227,0.005 c-1.602-1.711-4.038-2.349-5.864-2.349l-0.059,0C16.348,1.005,16.153,1,15.958,1C12.131,1,8.299,2.997,5.957,6.211 c-1.663,2.282-2.396,4.96-2.114,7.565c-0.735,0.499-1.292,1.214-1.577,2.069l-0.009,0.026l-0.008,0.026 c-0.581,1.917-0.019,3.287,0.432,4.387l0.09,0.221l0.015,0.036l0.016,0.036c0.756,1.672,2.112,2.874,3.658,3.255 C7.826,29.459,12.109,32,16.024,32c3.929,0,8.325-2.508,9.962-8.058c0.141-0.019,0.277-0.045,0.41-0.078 c2.134-0.476,3.7-2.246,4.411-4.99C31.186,17.438,31.004,16.04,30.292,14.948z'
        opacity='.3'
      ></path>
      <path
        fill='#fff'
        d='M29.292,13.948c-0.324-0.498-0.749-0.917-1.245-1.236c0.053-1.698-0.096-3.371-0.21-4.122 c-0.278-2.634-2.483-6.229-5.966-6.229h-0.014h-0.005C21.8,2.36,21.747,2.359,21.694,2.359c-0.076,0-0.152,0.002-0.227,0.005 c-1.602-1.711-4.038-2.349-5.864-2.349l-0.059,0C15.348,0.005,15.153,0,14.958,0C11.131,0,7.299,1.997,4.957,5.211 c-1.663,2.282-2.396,4.96-2.114,7.565c-0.735,0.499-1.292,1.214-1.577,2.069l-0.009,0.026l-0.008,0.026 c-0.581,1.917-0.019,3.287,0.432,4.387l0.09,0.221l0.015,0.036l0.016,0.036c0.756,1.672,2.112,2.874,3.658,3.255 C6.826,28.459,11.109,31,15.024,31c3.929,0,8.325-2.508,9.962-8.058c0.141-0.019,0.277-0.045,0.41-0.078 c2.134-0.476,3.7-2.246,4.411-4.99C30.186,16.438,30.004,15.04,29.292,13.948z'
      ></path>
      <path d='M15.513,18.958c-0.931,0.775-1.722,1.439-2.043,2.414c-0.02,0.056-0.003,0.043-0.076-0.043 c-0.088-0.092-0.18-0.071-0.078-0.046c0.604,0.117,1.248,0.104,1.863-0.034c0.236-0.052,0.469,0.097,0.521,0.332 c0.047,0.211-0.068,0.42-0.261,0.499c-0.56,0.229-1.163,0.37-1.781,0.41c-0.468,0.003-0.836,0.11-1.292-0.375 c-0.242-0.313-0.257-0.621-0.256-0.839c0.096-1.534,1.189-2.79,2.001-3.742C15.071,16.463,16.6,18.011,15.513,18.958 L15.513,18.958z'></path>
      <path d='M14.489,24.261c1.174-0.237,2.254-0.969,2.698-1.843c0.749-1.34,2.653,0.021,1.626,1.165 c-1.163,1.309-2.748,1.8-4.232,1.793c-0.31-0.001-0.56-0.254-0.559-0.564C14.023,24.535,14.226,24.305,14.489,24.261 L14.489,24.261z'></path>
      <ellipse cx='11' cy='17.624' rx='1' ry='1.433'></ellipse>
      <ellipse cx='19' cy='17.624' rx='1' ry='1.433'></ellipse>
      <path d='M25.909,13.869c0.242-1.95,0.03-4.429-0.099-5.216c-0.182-1.916-1.827-4.577-4.184-4.543 c-0.396-0.015-0.82,0.036-1.229,0.176c-1.011-1.787-3.362-2.574-5.268-2.543C8.679,1.372,2.516,7.565,4.43,13.858 c-0.882,0.108-1.715,0.609-2.013,1.49c-0.412,1.338,0.022,2.2,0.475,3.298c0.456,0.992,1.365,1.978,2.531,2.203 c0.305,0.073,0.7,0.09,1.084,0.044c1.471,10.983,14.898,10.686,16.799-0.094c0.504,0.151,1.105,0.157,1.532,0.05 c1.732-0.367,2.633-2.042,3.042-3.595C28.412,15.277,27.288,14.061,25.909,13.869z M7.29,9.671 c1.251-3.145,4.529-5.092,7.878-5.266c1.491-0.116,3.177,0.141,3.801,1.53c0.176,0.393,0.594,0.645,1.044,0.592 c1.713-0.379,2.944,0.768,3.248,2.599c0.272,1.607,0.533,3.444,0.404,5.137c-1.806-1.61-3.181-3.814-3.733-6.26 c-0.071-0.365-0.579-0.495-0.814-0.202c-1.565,1.73-3.888,2.785-5.96,3.813c-2.041,0.936-4.304,1.612-6.512,1.272 C6.657,11.774,6.868,10.679,7.29,9.671z M25.738,16.75c-0.263,1.097-0.793,2.418-2.027,2.086 c-0.509-0.181-1.078,0.077-1.271,0.589c-0.119,0.377-0.055,0.666,0.107,0.891c-0.674,1.808-1.663,3.457-2.975,4.694 c-4.942,4.462-10.451,1.097-11.876-4.668c0.166-0.218,0.241-0.499,0.143-0.87c-0.169-0.525-0.732-0.814-1.258-0.646 c-0.216,0.075-0.469,0.085-0.699,0.022c-0.845-0.208-1.493-1.837-1.366-2.682c0.342-0.158,0.679,0.232,0.859,0.593 c0.298,0.62,1.066,0.864,1.667,0.528c0.978-0.609,0.635-1.61-0.016-2.351c1.168,0.026,2.638-0.36,3.257-0.503 c3.279-1.163,6.434-2.861,8.878-5.345c0.451,2.522,1.676,4.915,3.481,6.843c-0.366,1.286,1.553,2.185,2.245,0.828 c0.175-0.333,0.415-0.643,0.746-0.628C25.795,16.133,25.822,16.262,25.738,16.75z'></path>
    </svg>
  ),
  nextjs: () => (
    <svg
      xmlns='http://www.w3.org/2000/svg'
      x='0px'
      y='0px'
      width='100'
      height='100'
      viewBox='0 0 48 48'
    >
      <path
        fill='#212121'
        d='M18.974,31.5c0,0.828-0.671,1.5-1.5,1.5s-1.5-0.672-1.5-1.5v-14c0-0.653,0.423-1.231,1.045-1.43 c0.625-0.198,1.302,0.03,1.679,0.563l16.777,23.704C40.617,36.709,44,30.735,44,24c0-11-9-20-20-20S4,13,4,24s9,20,20,20 c3.192,0,6.206-0.777,8.89-2.122L18.974,22.216V31.5z M28.974,16.5c0-0.828,0.671-1.5,1.5-1.5s1.5,0.672,1.5,1.5v13.84l-3-4.227 V16.5z'
      ></path>
    </svg>
  ),
  tailwind: () => (
    <svg
      xmlns='http://www.w3.org/2000/svg'
      x='0px'
      y='0px'
      width='100'
      height='100'
      viewBox='0 0 48 48'
    >
      <path
        fill='#00acc1'
        d='M24,9.604c-6.4,0-10.4,3.199-12,9.597c2.4-3.199,5.2-4.398,8.4-3.599 c1.826,0.456,3.131,1.781,4.576,3.247C27.328,21.236,30.051,24,36,24c6.4,0,10.4-3.199,12-9.598c-2.4,3.199-5.2,4.399-8.4,3.6 c-1.825-0.456-3.13-1.781-4.575-3.247C32.672,12.367,29.948,9.604,24,9.604L24,9.604z M12,24c-6.4,0-10.4,3.199-12,9.598 c2.4-3.199,5.2-4.399,8.4-3.599c1.825,0.457,3.13,1.781,4.575,3.246c2.353,2.388,5.077,5.152,11.025,5.152 c6.4,0,10.4-3.199,12-9.598c-2.4,3.199-5.2,4.399-8.4,3.599c-1.826-0.456-3.131-1.781-4.576-3.246C20.672,26.764,17.949,24,12,24 L12,24z'
      ></path>
    </svg>
  ),
  typescript: () => (
    <svg
      xmlns='http://www.w3.org/2000/svg'
      x='0px'
      y='0px'
      width='100'
      height='100'
      viewBox='0 0 48 48'
    >
      <rect width='36' height='36' x='6' y='6' fill='#1976d2'></rect>
      <polygon
        fill='#fff'
        points='27.49,22 14.227,22 14.227,25.264 18.984,25.264 18.984,40 22.753,40 22.753,25.264 27.49,25.264'
      ></polygon>
      <path
        fill='#fff'
        d='M39.194,26.084c0,0-1.787-1.192-3.807-1.192s-2.747,0.96-2.747,1.986 c0,2.648,7.381,2.383,7.381,7.712c0,8.209-11.254,4.568-11.254,4.568V35.22c0,0,2.152,1.622,4.733,1.622s2.483-1.688,2.483-1.92 c0-2.449-7.315-2.449-7.315-7.878c0-7.381,10.658-4.469,10.658-4.469L39.194,26.084z'
      ></path>
    </svg>
  ),
  nodejs: () => (
    <svg
      xmlns='http://www.w3.org/2000/svg'
      x='0px'
      y='0px'
      width='100'
      height='100'
      viewBox='0 0 48 48'
    >
      <path
        fill='#388e3c'
        d='M17.204 19.122l-4.907 2.715C12.113 21.938 12 22.126 12 22.329v5.433c0 .203.113.39.297.492l4.908 2.717c.183.101.41.101.593 0l4.907-2.717C22.887 28.152 23 27.965 23 27.762v-5.433c0-.203-.113-.39-.297-.492l-4.906-2.715c-.092-.051-.195-.076-.297-.076-.103 0-.205.025-.297.076M42.451 24.013l-.818.452c-.031.017-.049.048-.049.082v.906c0 .034.019.065.049.082l.818.453c.031.017.068.017.099 0l.818-.453c.03-.017.049-.048.049-.082v-.906c0-.034-.019-.065-.05-.082l-.818-.452C42.534 24.004 42.517 24 42.5 24S42.466 24.004 42.451 24.013'
      ></path>
      <path
        fill='#37474f'
        d='M35.751,13.364l-2.389-1.333c-0.075-0.042-0.167-0.041-0.241,0.003 c-0.074,0.044-0.12,0.123-0.12,0.209L33,20.295l-2.203-1.219C30.705,19.025,30.602,19,30.5,19c-0.102,0-0.205,0.025-0.297,0.076 h0.001l-4.907,2.715C25.113,21.892,25,22.08,25,22.282v5.433c0,0.203,0.113,0.39,0.297,0.492l4.908,2.717 c0.183,0.101,0.41,0.101,0.593,0l4.907-2.717C35.887,28.106,36,27.918,36,27.715V13.788C36,13.612,35.904,13.45,35.751,13.364z M32.866,26.458l-2.23,1.235c-0.083,0.046-0.186,0.046-0.269,0l-2.231-1.235C28.051,26.412,28,26.326,28,26.234v-2.47 c0-0.092,0.051-0.177,0.135-0.224l2.231-1.234h-0.001c0.042-0.023,0.088-0.034,0.135-0.034c0.047,0,0.093,0.012,0.135,0.034 l2.23,1.234C32.949,23.587,33,23.673,33,23.765v2.47C33,26.326,32.949,26.412,32.866,26.458z'
      ></path>
      <path
        fill='#2e7d32'
        d='M17.204,19.122L12,27.762c0,0.203,0.113,0.39,0.297,0.492l4.908,2.717 c0.183,0.101,0.41,0.101,0.593,0L23,22.329c0-0.203-0.113-0.39-0.297-0.492l-4.906-2.715c-0.092-0.051-0.195-0.076-0.297-0.076 c-0.103,0-0.205,0.025-0.297,0.076'
      ></path>
      <path
        fill='#4caf50'
        d='M17.204,19.122l-4.907,2.715C12.113,21.938,12,22.126,12,22.329l5.204,8.642 c0.183,0.101,0.41,0.101,0.593,0l4.907-2.717C22.887,28.152,23,27.965,23,27.762l-5.203-8.64c-0.092-0.051-0.195-0.076-0.297-0.076 c-0.103,0-0.205,0.025-0.297,0.076'
      ></path>
      <path
        fill='#37474f'
        d='M47.703 21.791l-4.906-2.715C42.705 19.025 42.602 19 42.5 19c-.102 0-.205.025-.297.076h.001l-4.907 2.715C37.114 21.892 37 22.084 37 22.294v5.411c0 .209.114.402.297.503l4.908 2.717c.184.102.409.102.593 0l2.263-1.253c.207-.115.206-.412-.002-.526l-4.924-2.687C40.052 26.412 40 26.325 40 26.231v-2.466c0-.092.05-.177.13-.221l2.235-1.236h-.001c.042-.023.088-.034.135-.034.047 0 .093.012.135.034l2.235 1.237c.08.044.13.129.13.221v2.012c0 .086.046.166.121.209.075.042.167.042.242-.001l2.398-1.393c.148-.086.24-.245.24-.417v-1.88C48 22.085 47.886 21.892 47.703 21.791zM10.703 21.791l-4.906-2.715C5.705 19.025 5.602 19 5.5 19c-.102 0-.205.025-.297.076h.001l-4.907 2.715C.114 21.892 0 22.084 0 22.294v7.465c0 .086.046.166.121.209.075.042.167.042.242-.001l2.398-1.393C2.909 28.488 3 28.329 3 28.157v-4.393c0-.092.05-.177.13-.221l2.235-1.236H5.365c.042-.023.088-.034.135-.034.047 0 .093.012.135.034l2.235 1.237C7.95 23.588 8 23.673 8 23.765v4.393c0 .172.091.331.24.417l2.398 1.393c.075.043.167.043.242.001C10.954 29.925 11 29.845 11 29.759v-7.464C11 22.085 10.886 21.892 10.703 21.791z'
      ></path>
    </svg>
  ),
  figma: () => (
    <svg
      xmlns='http://www.w3.org/2000/svg'
      x='0px'
      y='0px'
      width='100'
      height='100'
      viewBox='0 0 48 48'
    >
      <path
        fill='#e64a19'
        d='M26,17h-8c-3.866,0-7-3.134-7-7v0c0-3.866,3.134-7,7-7h8V17z'
      ></path>
      <path
        fill='#7c4dff'
        d='M25,31h-7c-3.866,0-7-3.134-7-7v0c0-3.866,3.134-7,7-7h7V31z'
      ></path>
      <path
        fill='#66bb6a'
        d='M18,45L18,45c-3.866,0-7-3.134-7-7v0c0-3.866,3.134-7,7-7h7v7C25,41.866,21.866,45,18,45z'
      ></path>
      <path
        fill='#ff7043'
        d='M32,17h-7V3h7c3.866,0,7,3.134,7,7v0C39,13.866,35.866,17,32,17z'
      ></path>
      <circle cx='32' cy='24' r='7' fill='#29b6f6'></circle>
    </svg>
  ),
  react: () => (
    <svg
      xmlns='http://www.w3.org/2000/svg'
      x='0px'
      y='0px'
      width='100'
      height='100'
      viewBox='0 0 48 48'
    >
      <path
        fill='#80deea'
        d='M24,34C11.1,34,1,29.6,1,24c0-5.6,10.1-10,23-10c12.9,0,23,4.4,23,10C47,29.6,36.9,34,24,34z M24,16	c-12.6,0-21,4.1-21,8c0,3.9,8.4,8,21,8s21-4.1,21-8C45,20.1,36.6,16,24,16z'
      ></path>
      <path
        fill='#80deea'
        d='M15.1,44.6c-1,0-1.8-0.2-2.6-0.7C7.6,41.1,8.9,30.2,15.3,19l0,0c3-5.2,6.7-9.6,10.3-12.4c3.9-3,7.4-3.9,9.8-2.5	c2.5,1.4,3.4,4.9,2.8,9.8c-0.6,4.6-2.6,10-5.6,15.2c-3,5.2-6.7,9.6-10.3,12.4C19.7,43.5,17.2,44.6,15.1,44.6z M32.9,5.4	c-1.6,0-3.7,0.9-6,2.7c-3.4,2.7-6.9,6.9-9.8,11.9l0,0c-6.3,10.9-6.9,20.3-3.6,22.2c1.7,1,4.5,0.1,7.6-2.3c3.4-2.7,6.9-6.9,9.8-11.9	c2.9-5,4.8-10.1,5.4-14.4c0.5-4-0.1-6.8-1.8-7.8C34,5.6,33.5,5.4,32.9,5.4z'
      ></path>
      <path
        fill='#80deea'
        d='M33,44.6c-5,0-12.2-6.1-17.6-15.6C8.9,17.8,7.6,6.9,12.5,4.1l0,0C17.4,1.3,26.2,7.8,32.7,19	c3,5.2,5,10.6,5.6,15.2c0.7,4.9-0.3,8.3-2.8,9.8C34.7,44.4,33.9,44.6,33,44.6z M13.5,5.8c-3.3,1.9-2.7,11.3,3.6,22.2	c6.3,10.9,14.1,16.1,17.4,14.2c1.7-1,2.3-3.8,1.8-7.8c-0.6-4.3-2.5-9.4-5.4-14.4C24.6,9.1,16.8,3.9,13.5,5.8L13.5,5.8z'
      ></path>
      <circle cx='24' cy='24' r='4' fill='#80deea'></circle>
    </svg>
  ),
};
